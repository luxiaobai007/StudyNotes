---
RAID磁盘阵列
---

[toc]

----

# RAID

> RAID （ Redundant Array of Independent Disks ）即**独立磁盘冗余阵列**，简称为**「磁盘阵列」**，其实就是用多个独立的磁盘组成在一起形成一个大的磁盘系统，从而实现比单块磁盘更好的存储性能和更高的可靠性。



## 类型

- **RAID0**
- **RAID1**
- **RAID3**
- **RAID5**
- **RAID6**
- **RAID10**



### RAID0

RAID0 是一种非常简单的的方式，它将**多块磁盘组合在一起形成一个大容量的存储**。当我们要写数据的时候，会将数据分为N份，以独立的方式实现N块磁盘的读写，那么这N份数据会同时并发的写到磁盘中，因此执行性能非常的高。

![image-20220106164211887](http://qiliu.luxiaobai.cn/img/image-20220106164211887.png)



RAID0 的读写性能理论上是单块磁盘的N倍（仅限理论，因为**实际中磁盘的寻址时间也是性能占用的大头**）

但RAID0的问题是，它并不提供数据校验或冗余备份，因此一旦某块磁盘损坏了，数据就直接丢失，无法恢复了。因此RAID0就不可能用于高要求的业务中，但可以用在对可靠性要求不高，对读写性能要求高的场景中。



### RAID1

![image-20220106164251919](http://qiliu.luxiaobai.cn/img/image-20220106164251919.png)

**RAID1** 是磁盘阵列中单位成本最高的一种方式。因为它的原理是在往磁盘写数据的时候，将同一份数据无差别的写两份到磁盘，分别写到工作磁盘和镜像磁盘，那么它的实际空间使用率只有50%了，

**RAID1**其实与**RAID0**效果刚好相反。**RAID1** 这种写双份的做法，就给数据做了一个冗余备份。这样的话，任何一块磁盘损坏了，都可以再基于另外一块磁盘去恢复数据，数据的可靠性非常强，但性能就没那么好了。





### RAID3

**RAID3**是将数据按照**RAID0**的形式，分成多份同时写入多块磁盘，但是还会另外再留出一块磁盘用于写**「奇偶校验码」**。例如总共有N块磁盘，那么就会让其中**额度`N-1`块用来并发的写数据，第N块磁盘用记录校验码数据**。一旦某一块磁盘坏掉了，就可以利用其它的N-1块磁盘去恢复数据。

但是由于**第N块磁盘是校验码磁盘**，因此有任何数据的写入都会要去更新这块磁盘，导致这块磁盘的读写是最频繁的，也就非常的容易损坏。





### RAID5

**RAID5**是对**RAID3**的改进

**RAID5**模式中，不再需要用单独的磁盘写校验码了。它把**校验码信息分布到各个磁盘上**。例如，总共有N块磁盘，那么会将要写入的数据分成N份，并发的写入到N块磁盘中，同时还将数据的校验码信息也写入到这N块磁盘中（数据与对应的校验码信息必须得分开存储在不同的磁盘上）。一旦某一块磁盘损坏了，就可以用**剩下的数据和对应的奇偶校验码信息去恢复损坏的数据**。

**RAID5**校验位算法原理：`P = D1 xor D2 xor D3 … xor Dn （D1,D2,D3 … Dn为数据块，P为校验，xor为异或运算）`

**RAID5**的方式，==最少需要三块磁盘来组建磁盘阵列，允许最多同时坏一块磁盘。如果有两块磁盘同时损坏了，那数据就无法恢复了==。

![image-20220113111326780](http://qiliu.luxiaobai.cn/img/image-20220113111326780.png)



### RAID6

> 可以在有两块磁盘同时损坏的情况下，也能保障数据可恢复。

RAID6除了每块磁盘上都有同级数据XOR校验区以外，还有针对每个数据块的XOR校验区,相当于每个数据块有两个校验保护措施，因此数据的冗余性更高了。

但是RAID6的这种设计也带来了很高的复杂度，虽然数据冗余性好，读取的效率也比较高，但是写数据的性能就很差。因此RAID6在实际环境中应用的比较少



### RAID10

`RAID10=RAID1+RAID0`

![image-20220113111913809](http://qiliu.luxiaobai.cn/img/image-20220113111913809.png)

**RAID10**兼备了**RAID1**和**RAID0**的有优点。首先基于RAID1模式将磁盘分为2份，当要写入数据的时候，将所有的数据在两份磁盘上同时写入，相当于写了双份数据，起到了数据保障的作用。且在每一份磁盘上又会基于RAID0技术讲数据分为N份并发的读写，这样也保障了数据的效率。

但也可以看出RAID10模式是有一半的磁盘空间用于存储冗余数据的，浪费的很严重，因此用的也不是很多。





[1]: https://zhuanlan.zhihu.com/p/51170719	"RAID磁盘阵列是什么"

























































































































