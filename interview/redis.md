------

[toc]



# 布隆过滤器

## 缓存穿透

查询一个一定不存在的数据，由于缓存是不命中时需要从数据库查询，查不到数据则不写入缓存，这将导致这个不存在的数据每次请求都要到数据库去查询，进而给数据库带来压力



#### 一般的缓存方式

读请求来了，先查下缓存，缓存有值命中，就直接返回；缓存没命中，就去查数据库，然后把数据库的值更新到缓存，再返回。



#### 如果使用HashMap作为中间层缓冲如何?

HashMap时间复杂度可以达到O(1)，但是呢因为HashMap数据是在内存里面的，如果大量的数据远超出了服务器的内存呢，那就无法使用HashMap



## 布隆过滤器介绍

一种占用空间很小的数据结构，它由一个很长的二进制向量和一组Hash映射函数组成，它**用于检索一个元素是否在一个集合中**，空间效率和查询时间都比一般的算法要好的多

缺点是有一定的误识别率和删除困难。



### Redis内存溢出策略

noeviction(默认策略):拒绝所有写入操作并返回客户端错误信息（error) OOM command not

allowed when used memory,只响应读操作。

\1. volatile-lru:根据LRU算法删除设置了超时属性（expire)的键，直到腾出足够空间为止。如果没有可

删除的键对象，回退到noeviction策略。

\2. allkeys-lru:根据LRU算法删除键，不管数据有没有设置超时属性， 直到腾出足够空间为止。

\3. allkeys-random:随机删除所有键，直到腾出足够空间为止。

\4. volatile-random:随机删除过期键，直到腾出足够空间为止。

\5. volatile-tth根据键值对象的ttl属性，删除最近将要过期数据。如果没有，回退到noeviction策略。
